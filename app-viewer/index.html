<!-- Copyright (c) Bloxcraft Studios 2025 -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bloxcraft UBG - Games</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link id="favicon" rel="shortcut icon" type="image/png" href="/bloxcraft.png">
    <link rel="stylesheet" href="/app-viewer/app-viewer-default.css">
   <script async src="https://www.googletagmanager.com/gtag/js?id=G-W0KXN0103E"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-W0KXN0103E');
</script>
</head>
<body>
  <div id="viewerBar">
    <p id="viewerTitle">Opening...</p>
    <div id="Btn-Group">
    <a class="bloxy-blue-btn bloxy-btn" id="closeViewer">Close</a>
    <a class="bloxy-blue-btn bloxy-btn" id="openNewTab">Play In New Tab</a>
    </div>
  </div>

  <iframe id="viewerFrame"></iframe>


  <script>
    const params = new URLSearchParams(window.location.search);
    const gameUrl = params.get("view");
    const viewerFrame = document.getElementById("viewerFrame");
    const viewerTitle = document.getElementById("viewerTitle");
    const closeViewer = document.getElementById("closeViewer");
    const openNewTab = document.getElementById("openNewTab");

    if (gameUrl && gameUrl.startsWith("/")) {
      viewerFrame.src = gameUrl;

   if (gameUrl === "/404") {
        viewerTitle.textContent = "404";
      }   else {
        viewerFrame.addEventListener("load", () => {
          try {
          
            const iframeDoc = viewerFrame.contentDocument || viewerFrame.contentWindow.document;
            const iframeTitle = iframeDoc.querySelector("title")?.innerText || "Untitled App";
            viewerTitle.textContent = iframeTitle;
          } catch {
            viewerTitle.textContent = gameUrl;
          }
        });
      }
    } else {
      viewerTitle.textContent = " ";
    }

    closeViewer.addEventListener("click", () => {
     
      window.top.location.href = "/games";
    });

    openNewTab.addEventListener("click", () => {
     
      if (gameUrl) {
        window.open(gameUrl, "_blank");
      }
    });
  </script>
  <script src="/main-injection.js"></script>
</body>
</html>
